# HelloWorld

> This chapter tells you how the project works. You'll learn about compiling, previews, and basic concepts: aiot-toolkit packaging tool, running platform APK, and RPK packages generated by the project.

Here's what you'll be able to do after reading:

- Create new projects
- Compile projects
- Install the app platform (loader) on a mobile device
- Run an RPK package on the app platform

## Building environment

Install the development software (Node.js and aiot-toolkit) and verify it. Go to `Building environment` to learn more.

## Creating new projects

Once the environment is built, developers can use the global `aiot` command to create a project template as shown below. `<ProjectName>` is the custom project name.

```
aiot init <ProjectName>
```

After the command is executed, the `<ProjectName>` folder will be created in current directory. It will be the project's root folder.

This project will contain the native code for **Project configuration** and **Simple pages**. Here's how the structure of the root directory will look like:

```
├── node_modules
├── sign                      RPK signature module
│   └── debug                 Debugging environment
│       ├── certificate.pem   Certificate
│       └── private.pem       Private key
├── src
│   ├── Common                Public resources and components
│   │   └── logo.png          Icon configured in manifest.json
│   ├── Demo                  Page directory
│   |   └── index.ux          Page file, the file name doesn't have to be the same as the parent folder
│   ├── app.ux                App file (used to include public resources)
│   └── manifest.json         Project configuration file (app description, interface declaration, page routing, etc.)
└── package.json              Definitions of modules and configuration of the project. "npm install" will automatically download the required environment according to this configuration file.
```

This is a brief description of the directory:

- **src**: The project source folder
- **node_modules**: Project dependent libraries
- **sign**: Signature module, only `debug` signature is supported now. If you're releasing the project for internal testing, add a `release` folder and online signature. To generate a signature, view `openssl` in `Compiling tools`.

## Compiling projects

#### Install npm dependency

In the project root directory, run the following command to install the dependency package (webpack, babel, etc.).

```
npm install
```

#### Compile projects

Run the following command in the root directory to compile and package the project, and generate the RPK package.

```
npm run build
```

After you finish compiling and packaging, **build** and **dist** folders will be created in the project's root directory.

- **build**: Temporary output, containing compiled page JS, images, etc.
- **dist**: Final output, containing RPK files. Project resources of the build directory are compressed into an `*.rpk` archive. **This RPK file will is the final output.**

#### Recompile automatically

If you want to automatically recompile your project after every time you modify the source code, use the following command:

```
npm run watch
```

## Installing the app platform (loader) on a mobile device

App platform is an Android app, click [here](http://dev.hybrid.xiaomi.com/platform/) to download.

Install and open the app platform on a mobile phone. A notification will appear: `App hasn't been installed, tap the Back button to install…`.

Tap the `Back button` on the phone to open the menu:

![img](hello-world.1.png)![img](hello-world.2.png)

Frequently used menu items include:

- **Settings**: Used to configure the HTTP server address, and set whether to display logs as well as remote debugging-related configuration.
- **Local installation**: Install the RPK package from the mobile file system.
- **Online update**: Send the HTTP request again to update the RPK package.

## Running an RPK package on the app platform

There are several ways to download and run the RPK file on the app platform. Select one of the options below (we recommend using HTTP request):

- **HTTP request**: App platform accesses the HTTP server to download the RPK package.
- **Local installation**: Developers copy the RPK package to the mobile phone. This RPK package will be installed on the app platform using the `Local installation` option in the menu.

#### 1. HTTP request

**Start HTTP server**

Create a new window in the terminal, run the following command in the root directory of the project to start the local server (default port number is 12306).

```
npm run server
```

Custom port (e.g.: 8080)

```
npm run server -- --port 8080
```

**Preview on the phone**

`Go to app platform --> Menu --> tap "Settings" --> tap "Scan the QR code"`, and scan the QR code on the terminal window to complete configuration (QR code in the browser also works, the page address is: `http://localhost:XXXX`).

After configuration, tap the `Back button` on the phone to go back to the homepage. You'll be able to preview after you receive a notification about applied settings.

If settings couldn't be applied, check if there are new requests in the terminal window that the "npm run server" is running on: "/bundle" (i.e.: Download the RPK package).

![img](hello-world.1.png)

The effect is as shown in the image below:

![img](hello-world.2.png)

#### 2. Local installation

**Copy RPK package to the phone**

Transfer the `RPK` package compiled in the `<ProjectName>/dist` directory to a mobile device (e.g., using a USB cable).

**Local installation of RPK packages**

`Go to app platform --> Menu--> tap "Settings" --> tap "File management"`, and select an RPK package from the mobile device to preview.

## Summary

Here you've learned about the folder structure of your project. **When compiling your project** `aiot-toolkit` will package source files into an `RPK file`, which is required **for your app to run**. If everything runs smoothly, you will be able to preview your app while you're developing it.